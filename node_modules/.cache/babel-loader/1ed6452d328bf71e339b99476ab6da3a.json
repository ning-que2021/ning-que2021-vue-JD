{"ast":null,"code":"import _asyncToGenerator from \"D:/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"D:/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from \"vuex\";\nexport default {\n  name: 'Trade',\n  data: function data() {\n    return {\n      msg: '',\n      orderId: 10549,\n      code: 200\n    };\n  },\n  mounted: function mounted() {\n    this.$store.dispatch('getUserAddress');\n    this.$store.dispatch('getOrderInfo');\n  },\n  computed: _objectSpread(_objectSpread({}, mapState({\n    addressInfo: function addressInfo(state) {\n      return state.trade.address;\n    },\n    orderInfo: function orderInfo(state) {\n      return state.trade.orderInfo;\n    }\n  })), {}, {\n    userDefaultAddress: function userDefaultAddress() {\n      return this.addressInfo.find(function (item) {\n        return item.isDefault == 1;\n      }) || {};\n    }\n  }),\n  methods: {\n    changeDefault: function changeDefault(address, addressInfo) {\n      addressInfo.forEach(function (item) {\n        return item.isDefault = 0;\n      });\n      address.isDefault = 1;\n    },\n    submitOrder: function submitOrder() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var traderNo, data, result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                traderNo = _this.orderInfo.traderNo;\n                data = {\n                  consignee: _this.userDefaultAddress.consignee,\n                  consigneeTel: _this.userDefaultAddress.phoneNum,\n                  deliveryAddress: _this.userDefaultAddress.fullAddress,\n                  paymentWay: \"ONLINE\",\n                  orderComment: _this.msg,\n                  orderDetailList: _this.orderInfo.detailArrayList\n                };\n                _context.next = 4;\n                return _this.$API.reqSubmitOrder(traderNo, data);\n\n              case 4:\n                result = _context.sent;\n\n                //console.log(result);\n                if (_this.code == 200) {\n                  //this.orderId = result.data.data;\n                  _this.$router.push('/pay?orderId=' + _this.orderId);\n                } else {//alert(result.data.data)\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}