{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from \"vuex\";\nexport default {\n  name: 'Trade',\n\n  data() {\n    return {\n      msg: '',\n      orderId: 10549,\n      code: 200\n    };\n  },\n\n  mounted() {\n    this.$store.dispatch('getUserAddress');\n    this.$store.dispatch('getOrderInfo');\n  },\n\n  computed: { ...mapState({\n      addressInfo: state => state.trade.address,\n      orderInfo: state => state.trade.orderInfo\n    }),\n\n    userDefaultAddress() {\n      return this.addressInfo.find(item => item.isDefault == 1) || {};\n    }\n\n  },\n  methods: {\n    changeDefault(address, addressInfo) {\n      addressInfo.forEach(item => item.isDefault = 0);\n      address.isDefault = 1;\n    },\n\n    async submitOrder() {\n      let {\n        traderNo\n      } = this.orderInfo;\n      let data = {\n        consignee: this.userDefaultAddress.consignee,\n        consigneeTel: this.userDefaultAddress.phoneNum,\n        deliveryAddress: this.userDefaultAddress.fullAddress,\n        paymentWay: \"ONLINE\",\n        orderComment: this.msg,\n        orderDetailList: this.orderInfo.detailArrayList\n      };\n      let result = await this.$API.reqSubmitOrder(traderNo, data); //console.log(result);\n\n      if (this.code == 200) {\n        //this.orderId = result.data.data;\n        this.$router.push('/pay?orderId=' + this.orderId);\n      } else {//alert(result.data.data)\n      }\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}